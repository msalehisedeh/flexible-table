{"version":3,"sources":["ng://@sedeh/flexible-table/src/app/flexible-table/components/table-headers-generator.ts","ng://@sedeh/flexible-table/src/app/flexible-table/flexible.table.component.ts","ng://@sedeh/flexible-table/src/app/flexible-table/components/pagination.component.ts","ng://@sedeh/flexible-table/src/app/flexible-table/components/configuration.component.ts","ng://@sedeh/flexible-table/src/app/flexible-table/components/table.component.ts","ng://@sedeh/flexible-table/src/app/flexible-table/lock.table.component.ts","ng://@sedeh/flexible-table/src/app/flexible-table/flexible-table-module.ts"],"names":["TableHeadersGenerator","prototype","generateHeadersFor","root","path","maxVisible","filteringEnabled","_this","this","Object","keys","map","key","innerPath","length","header","value","makeWords","sortable","dragable","present","headers","filter","push","Array","node","retreiveHeaders","trackingkey","result","localStorage","getItem","JSON","parse","undefined","e","persistHeaders","removeItem","setItem","stringify","name","replace","str","toUpperCase","Injectable","FlexibleTableComponent","generator","printTable","configureTable","configureColumns","clickSort","setSize","firstPage","lastPage","previousPage","EventEmitter","ngOnInit","persistenceKey","persistenceId","items","enableFiltering","rowDetailer","expandable","item","data","pageInfo","to","pageSize","contentSize","pages","from","currentPage","maxWidth","updateLimits","subHeaders","reconfigure","event","onconfigurationchange","emit","onPaginationChange","viewTable","evaluateRows","tableAction","onaction","onDrop","onCellEdit","onCellContentEdit","Component","args","selector","template","Input","Output","ViewChild","PaginationComponent","nextPage","info","Math","ceil","setTimeout","ready","setWidth","width","onready","onchange","selectFirst","selectNext","selectPrev","selectLast","changeCurrent","ranger","v","parseInt","changeSize","sizer","ConfigurationComponent","checked","enableFilter","print","onprint","keyup","which","target","click","TableViewComponent","el","findColumnWithID","id","list","headerColumnElements","column","i","getAttribute","swapColumns","source","destination","parentNode","srcIndex_1","getColumnIndex","medium","desIndex_1","console","log","x_1","filteredItems","sobj","onfilter","locked","x_2","index","itemValue","hpath","subitem","subkey","initVisibleRows","lock","stopPropagation","preventDefault","sort","icon","h","classList","remove","add","descending","ascending","hpath_1","split","filterItems","a","b","v1","v2","offsetWidth","table","element","nativeElement","ngOnChanges","changes","actionKeys","showIcon","rowDetailerHeaders","children","caption","headerById","columnsCount","count","action","hover","flag","toCssClass","keydown","code","offScreenMessage","message","substring","cellContent","content","String","rowDetailerContext","tableInfo","changeFilter","filterwhiletyping","filteringTimerId","clearTimeout","actionClick","expandIf","expanded","printMode","innerHTML","popupWin","window","open","document","write","close","shouldSkipItem","filterBy","parseFloat","f","indexOf","keepItem","onTableCellEdit","n","t","dragEnabled","dropEnabled","onDragStart","onDragEnd","ElementRef","read","ViewContainerRef","LockTableComponent","renderer","scroll","setElementStyle","lockedTable","scrollLeft","evaluatePositioning","unlockedTable","lockedHeaders","unlockedHeaders","bind","onlock","changeLockedTableFilteredItems","changeUnlockedTableFilteredItems","Renderer","FlexibleTableModule","NgModule","imports","CommonModule","DragDropModule","IntoPipeModule","declarations","exports","entryComponents","providers","schemas","CUSTOM_ELEMENTS_SCHEMA"],"mappings":"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","sourcesContent":["/*\r\n * This object will traverse through a given json object and finds all the attributes of \r\n * the object and its related associations within the json. The resulting structure would be \r\n * name of attributes and a pathway to reach the attribute deep in object heirarchy.\r\n */\r\n\r\nimport { Injectable } from '@angular/core';\r\n\r\nexport interface VisualizationPoint {\r\n  key: string,\r\n  value: string\r\n}\r\n\r\n@Injectable()\r\nexport class TableHeadersGenerator {\r\n  private headers = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  generateHeadersFor(root: {}, path: string, maxVisible: number, filteringEnabled: boolean) {\r\n\r\n    if (root !== null) {\r\n      Object.keys(root).map( (key) => {\r\n        const innerPath = (path.length ? (path + \".\" + key) : key);\r\n  \r\n        if (typeof root[key] === \"string\" || typeof root[key] === \"number\" || typeof root[key] === \"boolean\") {\r\n          const header: any = {\r\n            key: innerPath,\r\n            value: this.makeWords(innerPath),\r\n            sortable: true,\r\n            dragable: true,\r\n            present: (path.length === 0 && this.headers.length < maxVisible)\r\n          }\r\n          if (filteringEnabled) {\r\n            header.filter = \"\";\r\n          }\r\n          this.headers.push(header);\r\n        } else if (root[key] instanceof Array) {\r\n          const node = root[key];\r\n          if (node.length && !(node[0] instanceof Array) && (typeof node[0] !== \"string\")) {\r\n            this.generateHeadersFor(node[0], innerPath, maxVisible, filteringEnabled);\r\n          } else {\r\n            this.headers.push({\r\n              key: innerPath,\r\n              value: this.makeWords(innerPath)\r\n            })\r\n          }\r\n        } else {\r\n          this.generateHeadersFor(root[key], innerPath, maxVisible, filteringEnabled);\r\n        }\r\n      });\r\n    }\r\n    return this.headers;\r\n  }\r\n\r\n  retreiveHeaders(key, trackingkey) {\r\n    let result: any;\r\n    try {\r\n      result = localStorage.getItem(trackingkey);\r\n\r\n      if (!result || result != key) {\r\n        result = undefined; // we have a newer version and it will override saved data.\r\n      } else {\r\n        result = localStorage.getItem(key);\r\n        result = result ? JSON.parse(result) : result;\r\n      }\r\n    } catch (e) {\r\n    }\r\n    return result;\r\n  }\r\n\r\n  persistHeaders(key, trackingkey, headers) {\r\n    try {\r\n      localStorage.removeItem(trackingkey);\r\n      localStorage.setItem(trackingkey, key);\r\n      localStorage.setItem(key, JSON.stringify(headers));\r\n    } catch (e) {\r\n    }\r\n  }\r\n\r\n  private makeWords(name) {\r\n    return name\r\n            .replace(/\\./g,' ~ ')\r\n            .replace(/([A-Z])/g, ' $1')\r\n            .replace(/-/g,\" \")\r\n            .replace(/_/g,\" \")\r\n            .replace(/^./, (str) => str.toUpperCase());\r\n  }\r\n}\r\n","/*\r\n* Provides rendering of a table which is using the given FlexibleTableHeader set in\r\n* order to tabulate the given data. As per definition of earch header component,\r\n* a column could be hidden, sortable, or draggable. Each table row can expand/collapse\r\n* or respond to a click action.\r\n*/\r\nimport {\r\n    Component,\r\n\tInput,\r\n\tOutput,\r\n\tViewChild,\r\n\tViewContainerRef,\r\n\tOnInit,\r\n\tEventEmitter\r\n} from '@angular/core';\r\n\r\nimport { DropEvent, DragEvent } from '@sedeh/drag-enabled';\r\nimport { TableHeadersGenerator } from './components/table-headers-generator';\r\nimport { TableViewComponent } from './components/table.component';\r\n\r\n@Component({\r\n\tselector: 'flexible-table',\r\n\ttemplateUrl: './flexible.table.component.html',\r\n\tstyleUrls: ['./flexible.table.component.scss']\r\n})\r\nexport class FlexibleTableComponent implements OnInit {\r\n\r\n\tsubHeaders:any;\r\n\r\n    @Input(\"vocabulary\")\r\n    public vocabulary = {\r\n\t\tprintTable: \"Print Table\",\r\n\t\tconfigureTable: \"Configure Table\",\r\n\t\tconfigureColumns: \"Configure Columns\",\r\n\t\tclickSort: \"Click to Sort\",\r\n\t\tsetSize: \"Set Size\",\r\n\t\tfirstPage: \"First\",\r\n\t\tlastPage: \"Last\",\r\n\t\tpreviousPage: \"Previous\"\r\n\t};\r\n\t\r\n    @Input(\"persistenceId\")\r\n    public persistenceId: string;\r\n\r\n\t@Input(\"persistenceKey\")\r\n    public persistenceKey: string;\r\n\r\n    @Input(\"caption\")\r\n    public caption: string;\r\n\r\n    @Input(\"action\")\r\n    public action: string;\r\n\r\n    @Input(\"actionKeys\")\r\n    public actionKeys;\r\n\r\n    @Input(\"tableClass\")\r\n    public tableClass = 'default-flexible-table';\r\n\r\n\t@Input(\"headers\")\r\n\tpublic headers: any[];\r\n\r\n\t@Input(\"items\")\r\n\tpublic items: any[];\r\n\r\n\t@Input(\"pageInfo\")\r\n\tpublic pageInfo: any;\r\n\r\n\t@Input(\"tableInfo\")\r\n\tpublic tableInfo: any;\r\n\r\n    @Input(\"configurable\")\r\n    public configurable: boolean;\r\n\r\n\t@Input(\"configAddon\")\r\n\tpublic configAddon: any;\r\n\r\n\t@Input(\"enableIndexing\")\r\n    public enableIndexing: boolean;\r\n\r\n    @Input(\"enableFiltering\")\r\n    public enableFiltering: boolean;\r\n\r\n    @Input(\"rowDetailer\")\r\n    public rowDetailer: any;\r\n\r\n    @Input(\"expandable\")\r\n    public expandable: any;\r\n\r\n    @Input(\"expandIf\")\r\n    public expandIf: boolean;\r\n\r\n    @Input(\"filterwhiletyping\")\r\n    public filterwhiletyping: boolean;\r\n\r\n    @Input(\"rowDetailerHeaders\")\r\n    public rowDetailerHeaders: any;\r\n\r\n\t@Output('onaction')\r\n\tprivate onaction = new EventEmitter();\r\n\r\n\t@Output('onCellContentEdit')\r\n\tprivate onCellContentEdit = new EventEmitter();\r\n\r\n\t@Output('onconfigurationchange')\r\n\tprivate onconfigurationchange = new EventEmitter();\r\n\r\n\t@ViewChild('viewTable')\r\n\tviewTable: TableViewComponent;\r\n\r\n    constructor(private generator: TableHeadersGenerator) {}\r\n\r\n\tngOnInit() {\r\n\t\tif (this.persistenceKey) {\r\n\t\t\tconst headers:any = this.generator.retreiveHeaders(this.persistenceKey, this.persistenceId);\r\n\r\n\t\t\tif (headers) {\r\n\t\t\t\tthis.headers = headers;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.headers || this.headers.length === 0) {\r\n\t\t\tthis.headers = this.generator.generateHeadersFor(this.items[0],\"\", 5, this.enableFiltering);\r\n\t\t\tif (this.persistenceKey) {\r\n\t\t\t\tthis.generator.persistHeaders(this.persistenceKey, this.persistenceId, this.headers);\r\n\t\t\t}\r\n        }\r\n\t\tif (!this.rowDetailer && this.expandable) {\r\n\t\t\tthis.rowDetailer = function(item) {\r\n\t\t\t\treturn {data: item, headers: []};\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (this.pageInfo) {\r\n\t\t\tif (!this.pageInfo.to) {\r\n\t\t\t\tthis.pageInfo.to = this.pageInfo.pageSize;\r\n\t\t\t}\r\n\t\t\tthis.pageInfo.contentSize = this.items.length;\r\n\t\t} else {\r\n\t\t\tthis.pageInfo = {\r\n                contentSize: 100000,\r\n                pageSize: 100000,\r\n                pages: 1,\r\n                from: 0,\r\n                to: 100000,\r\n                currentPage: 1,\r\n                maxWidth: \"0\"\r\n            };\r\n\t\t}\r\n\t\tthis.updateLimits();\r\n\t}\r\n\r\n\tupdateLimits() {\r\n\t\tthis.subHeaders = this.headers.filter( (header) => header.present === true);\r\n\t}\r\n\r\n\treconfigure(event) {\r\n\t\tthis.headers = event;\r\n\t\tthis.updateLimits();\r\n\t\tthis.onconfigurationchange.emit(event);\r\n\r\n\t\tif (this.persistenceKey) {\r\n\t\t\tthis.generator.persistHeaders(this.persistenceKey, this.persistenceId, this.headers);\r\n\t\t}\r\n\t}\r\n\r\n\tonPaginationChange(event) {\r\n\t\tthis.pageInfo = event;\r\n\t\tthis.viewTable.evaluateRows();\r\n\t}\r\n\r\n\ttableAction(event) {\r\n\t\tthis.onaction.emit(event)\r\n\t}\r\n\r\n\tonDrop(event:DropEvent){\r\n\r\n\t}\r\n\tonCellEdit(event){\r\n\t\tthis.onCellContentEdit.emit(event);\r\n\t}\r\n}\r\n","/*\r\n* Provides pagination of a data set in a table.\r\n*/\r\nimport { Component, Input, Output, EventEmitter, OnInit } from \"@angular/core\";\r\n\r\nexport interface PaginationInfo {\r\n\tcontentSize: number,\r\n\tpageSize: number,\r\n    maxWidth?: string,\r\n\tpages?: number,\r\n\tfrom?: number,\r\n\tto?: number,\r\n\tcurrentPage?: number,\r\n    resetSize?: boolean\r\n}\r\n\r\n@Component({\r\n    selector: 'table-pagination',\r\n\ttemplateUrl: './pagination.component.html',\r\n\tstyleUrls: ['./pagination.component.scss']\r\n})\r\nexport class PaginationComponent implements OnInit {\r\n\r\n    @Input(\"vocabulary\")\r\n    public vocabulary = {setSize: \"\", firstPage: \"\", nextPage: \"\", lastPage: \"\", previousPage: \"\"};\r\n\r\n    @Input(\"info\")\r\n    info: PaginationInfo = { contentSize: 0, pageSize: 0, maxWidth: \"0\" };\r\n\r\n\t@Output('onchange')\r\n    onchange = new EventEmitter();\r\n\r\n    @Output('onready')\r\n    onready = new EventEmitter();\r\n\r\n\tngOnInit() {\r\n\t\tif (!this.info) {\r\n\t\t\tthis.info = { \r\n                contentSize: 1000, \r\n                pageSize: 1000, \r\n                pages: 1, \r\n                from: 0, \r\n                to: 1000, \r\n                currentPage: 1, \r\n                maxWidth: \"0\" \r\n            };\r\n\t\t}\r\n\t\tif (this.info.contentSize && this.info.pageSize) {\r\n\t\t\tthis.info.pages = Math.ceil(this.info.contentSize / this.info.pageSize);\r\n\t\t\tthis.info.from = 0;\r\n\t\t\tthis.info.to = this.info.pageSize - 1;\r\n\t\t\tthis.info.currentPage = 1;\r\n\t\t    setTimeout(() => this.ready(), 66);\r\n\t\t}\r\n    }\r\n\r\n    public setWidth(width: number) {\r\n        this.info.maxWidth = width + \"px\";\r\n    }\r\n\r\n    ready() {\r\n        this.onready.emit(this);\r\n        this.onchange.emit(this.info);\r\n    }\r\n\r\n    selectFirst() {\r\n        if (this.info.currentPage > 1) {\r\n\t\t    this.info.from = 0;\r\n\t\t    this.info.to = this.info.from + this.info.pageSize - 1;\r\n\t\t    this.info.currentPage = 1;\r\n            this.onchange.emit(this.info);\r\n        }\r\n   }\r\n\r\n   selectNext() {\r\n        if (this.info.currentPage < this.info.pages) {\r\n \t\tthis.info.from = this.info.to + 1;\r\n\t\tthis.info.to = this.info.from + this.info.pageSize - 1;\r\n\t\tthis.info.currentPage++;\r\n        this.onchange.emit(this.info);\r\n        }\r\n    }\r\n\r\n    selectPrev() {\r\n        if (this.info.currentPage > 1) {\r\n \t\t    this.info.from -= this.info.pageSize;\r\n\t\t    this.info.to = this.info.from + this.info.pageSize - 1;\r\n\t\t    this.info.currentPage--;\r\n            this.onchange.emit(this.info);\r\n        }\r\n    }\r\n\r\n    selectLast() {\r\n        if (this.info.currentPage < this.info.pages) {\r\n\t\t    this.info.from = this.info.pageSize * (this.info.pages - 1);\r\n\t\t    this.info.to = this.info.from + this.info.pageSize - 1;\r\n\t\t    this.info.currentPage = this.info.pages;\r\n            this.onchange.emit(this.info);\r\n        }\r\n    }\r\n\r\n    changeCurrent(ranger: any) {\r\n        const v = parseInt( ranger.value, 10 );\r\n        if (this.info.currentPage < v && v > 0 && v < this.info.pages) {\r\n\t\t    this.info.from = v * (this.info.pageSize - 1);\r\n\t\t    this.info.to = this.info.from + this.info.pageSize - 1;\r\n\t\t    this.info.currentPage = v;\r\n            this.onchange.emit(this.info);\r\n        } else {\r\n            ranger.value = this.info.currentPage;\r\n        }\r\n    }\r\n\r\n    changeSize(sizer: any) {\r\n        const v = parseInt( sizer.value, 10 );\r\n        if (this.info.contentSize >= v && v > 1) {\r\n            this.info.pageSize = v;\r\n \t\t\tthis.info.pages = Math.ceil(this.info.contentSize / v);\r\n            this.info.from = 0;\r\n\t\t\tthis.info.to = this.info.pageSize - 1;\r\n\t\t\tthis.info.currentPage = 1;\r\n            this.onchange.emit(this.info);\r\n        } else {\r\n            sizer.value = this.info.pageSize;\r\n        }\r\n    }\r\n}\r\n","/*\r\n* Provides ability to configure displaying of table columns. As per definition of earch header component,\r\n* a column could be hidden.\r\n*/\r\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n@Component({\r\n\tselector: 'table-configuration',\r\n\ttemplateUrl: './configuration.component.html',\r\n\tstyleUrls: ['./configuration.component.scss']\r\n})\r\nexport class ConfigurationComponent {\r\n    showConfigurationView: boolean;\r\n\r\n\t@Input(\"title\")\r\n\tpublic title: string;\r\n\r\n\t@Input(\"action\")\r\n\tpublic action: string;\r\n\r\n\t@Input(\"printTable\")\r\n\tpublic printTable: string;\r\n\t\r\n\t@Input(\"headers\")\r\n\tpublic headers: any[];\r\n\r\n\t@Input(\"configAddon\")\r\n\tpublic configAddon: any;\r\n\r\n\t@Output('onchange')\r\n\tprivate onchange = new EventEmitter();\r\n\r\n\t@Output('onprint')\r\n\tprivate onprint = new EventEmitter();\r\n\r\n\treconfigure(item, header) {\r\n        header.present = item.checked;\r\n\t\tthis.onchange.emit(this.headers);\r\n\t}\r\n\r\n\tenableFilter(item, header) {\r\n        if (header.filter === undefined) {\r\n\t\t\theader.filter = \"\";\r\n\t\t} else {\r\n\t\t\tdelete header.filter;\r\n\t\t}\r\n\t\tthis.onchange.emit(this.headers);\r\n\t}\r\n\r\n\tprint(event) {\r\n\t\tthis.onprint.emit(true);\r\n\t}\r\n\r\n    keyup(event) {\r\n        const code = event.which;\r\n        if (code === 13) {\r\n\t\t\tevent.target.click();\r\n\t\t}\r\n    }\r\n}\r\n","/*\r\n* Provides rendering of a table which is using the given FlexibleTableHeader set in\r\n* order to tabulate the given data. As per definition of earch header component,\r\n* a column could be hidden, sortable, or draggable. Each table row can expand/collapse\r\n* or respond to a click action.\r\n*/\r\nimport {\r\n    Component,\r\n\tInput,\r\n\tOutput,\r\n\tViewChild,\r\n\tViewContainerRef,\r\n\tOnInit,\r\n\tOnChanges,\r\n\tEventEmitter,\r\n\tElementRef\r\n} from '@angular/core';\r\n\r\nimport { DropEvent, DragEvent } from '@sedeh/drag-enabled';\r\nimport { Timeouts } from '../../../../node_modules/@types/selenium-webdriver';\r\nimport { Time } from '../../../../node_modules/@angular/common';\r\n\r\nexport interface FlexibleTableHeader {\r\n\tkey: string,\r\n\tvalue: string,\r\n\tpresent: boolean,\r\n\twidth?: string,\r\n\tminwidth?: string,\r\n\tformat?: string,\r\n\tfilter?: string,\r\n\tdragable?: boolean,\r\n\tsortable?: boolean,\r\n\tclass?:string,\r\n\tlocked?:boolean,\r\n\tascending?: boolean,\r\n\tdescending?: boolean\r\n}\r\n\r\n@Component({\r\n\tselector: 'table-view',\r\n\ttemplateUrl: './table.component.html',\r\n\tstyleUrls: ['./table.component.scss']\r\n})\r\nexport class TableViewComponent implements OnInit, OnChanges {\r\n\tdragging = false;\r\n\tprintMode = false;\r\n\tfilteredItems = [];\r\n\tfilteringTimerId: any;\r\n\r\n    @Input(\"vocabulary\")\r\n    public vocabulary = {\r\n\t\tconfigureTable: \"Configure Table\",\r\n\t\tconfigureColumns: \"Configure Columns\",\r\n\t\tclickSort: \"Click to Sort\",\r\n\t\tsetSize: \"Set Size\",\r\n\t\tfirstPage: \"First\",\r\n\t\tlastPage: \"Last\",\r\n\t\tpreviousPage: \"Previous\"\r\n\t};\r\n\r\n\t@Input(\"lockable\")\r\n\tlockable:boolean;\r\n\r\n\t@Input(\"caption\")\r\n    public caption: string;\r\n\r\n    @Input(\"action\")\r\n    public action: string;\r\n\r\n    @Input(\"pageInfo\")\r\n    public pageInfo;\r\n\r\n    @Input(\"actionKeys\")\r\n    public actionKeys;\r\n\r\n    @Input(\"tableClass\")\r\n    public tableClass = 'default-flexible-table';\r\n\r\n\t@Input(\"headers\")\r\n\tpublic headers: any[];\r\n\r\n\t@Input(\"items\")\r\n\tpublic items: any[];\r\n\r\n\t@Input(\"tableInfo\")\r\n\tpublic tableInfo: any;\r\n\r\n    @Input(\"enableIndexing\")\r\n    public enableIndexing: boolean;\r\n\r\n    @Input(\"enableFiltering\")\r\n    public enableFiltering: boolean;\r\n\r\n    @Input(\"rowDetailer\")\r\n    public rowDetailer: any;\r\n\r\n    @Input(\"expandable\")\r\n    public expandable: any;\r\n\r\n    @Input(\"expandIf\")\r\n    public expandIf: boolean;\r\n\r\n    @Input(\"filterwhiletyping\")\r\n    public filterwhiletyping: boolean;\r\n\r\n    @Input(\"rowDetailerHeaders\")\r\n    public rowDetailerHeaders: any;\r\n\r\n\t@Output('onaction')\r\n\tprivate onaction = new EventEmitter();\r\n\r\n\t@Output('onchange')\r\n\tprivate onchange = new EventEmitter();\r\n\r\n\t@Output('onfilter')\r\n\tprivate onfilter = new EventEmitter();\r\n\r\n\t@Output('onCellContentEdit')\r\n\tprivate onCellContentEdit = new EventEmitter();\r\n\r\n\t@ViewChild('flexible', {read: ViewContainerRef}) private table: ViewContainerRef;\r\n\r\n    constructor(public el:ElementRef) {}\r\n\r\n\r\n\tprivate findColumnWithID(id: string) {\r\n        const list = this.headerColumnElements();\r\n\t\tlet column = null;\r\n\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\tif (list[i].getAttribute(\"id\") === id) {\r\n\t\t\t\tcolumn = list[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn column;\r\n\t}\r\n\r\n\tprivate swapColumns(source: any, destination: any) {\r\n\r\n\t\tif (source.node.parentNode === destination.node.parentNode) {\r\n\t\t\tconst srcIndex = this.getColumnIndex(source.medium.key);\r\n\t\t\tconst desIndex = this.getColumnIndex(destination.medium.key);\r\n\t\t\tif (srcIndex < 0 || desIndex < 0) {\r\n\t\t\t\tconsole.log(\"invalid drop id\", source.medium.key, destination.medium.key);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst x = this.filteredItems;\r\n\t\t\tthis.filteredItems = [];\r\n\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tconst sobj = this.headers[srcIndex];\r\n\t\t\t\tthis.headers[srcIndex] = this.headers[desIndex];\r\n\t\t\t\tthis.headers[desIndex] = sobj;\r\n\t\t\t\tthis.filteredItems = x;\r\n\r\n\t\t\t\tthis.onfilter.emit(this.filteredItems);\r\n\t\t\t\tthis.onchange.emit(this.headers);\r\n\t\t\t}, 33);\r\n\t\r\n\t\t} else if (source.medium.locked || destination.medium.locked) {\r\n\t\t\tconst x = this.filteredItems;\r\n\t\t\tthis.filteredItems = [];\r\n\t\t\tthis.onfilter.emit(this.filteredItems);\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tsource.medium.locked = !source.medium.locked;\r\n\t\t\t\tdestination.medium.locked = !destination.medium.locked;\r\n\t\t\t\tthis.filteredItems = x;\r\n\t\t\t\tthis.onfilter.emit(this.filteredItems);\r\n\t\t\t\tthis.onchange.emit(this.headers);\r\n\t\t\t},33);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getColumnIndex(id: string) {\r\n\t\tlet index = -1;\r\n\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\tif (this.headers[i].key === id) {\r\n\t\t\t\tindex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn index;\r\n\t}\r\n\tprivate itemValue(item, hpath) {\r\n\t\tlet subitem = item;\r\n\t\thpath.map( (subkey) => {\r\n\t\t\tif (subitem) {\r\n\t\t\t\tsubitem = subitem[subkey];\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn subitem === undefined || subitem === null || subitem === \"null\" ? \"\" : subitem;\r\n\t}\r\n\tinitVisibleRows() {\r\n\t\tconst result = [];\r\n\t\tfor (let i = 0; i < this.filteredItems.length; i++) {\r\n\t\t\tif (i >= this.pageInfo.from && i <= this.pageInfo.to) {\r\n\t\t\t\tresult.push(this.filteredItems[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.filteredItems = result;\r\n\t}\r\n\r\n\tlock(header: FlexibleTableHeader, event) {\r\n        event.stopPropagation();\t\r\n        event.preventDefault();\r\n\t\theader.locked = !header.locked;\r\n\t\tthis.onchange.emit(this.headers);\r\n\t}\r\n\tsort(header: FlexibleTableHeader, icon) {\r\n\t\tif (header.sortable && this.items && this.items.length) {\r\n\t\t\tfor (let i = 0; i < this.headers.length ; i++) {\r\n                const h = this.headers[i];\r\n\r\n                if (h.key !== header.key) {\r\n\t\t\t\t\tconst item = this.findColumnWithID(h.key);\r\n\r\n\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\titem.classList.remove(\"ascending\");\r\n\t\t\t\t\t\titem.classList.remove(\"descending\");\r\n\t\t\t\t\t\titem.classList.add(\"sortable\");\r\n\t\t\t\t\t}\r\n                    h.descending = false;\r\n                    h.ascending = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n            icon.classList.remove(\"fa-sort\");\r\n\t\t\tif (header.ascending || (!header.ascending && !header.descending)) {\r\n\t\t\t\theader.descending = true;\r\n\t\t\t\theader.ascending = false;\r\n\t\t\t\ticon.classList.remove(\"fa-sort-asc\");\r\n\t\t\t\ticon.classList.add(\"fa-sort-desc\");\r\n\t\t\t} else {\r\n\t\t\t\theader.descending = false;\r\n\t\t\t\theader.ascending = true;\r\n\t\t\t\ticon.classList.remove(\"fa-sort-desc\");\r\n\t\t\t\ticon.classList.add(\"fa-sort-asc\");\r\n\t\t\t}\r\n\t\t\tconst hpath = header.key.split(\".\");\r\n\r\n\t\t\tif (this.enableFiltering) {\r\n\t\t\t\tthis.filterItems();\r\n\t\t\t} else {\r\n\t\t\t\tthis.filteredItems = this.items ? this.items : [];\r\n\t\t\t}\r\n\t\t\tthis.filteredItems.sort((a, b) => {\r\n\t\t\t\tconst v1 = this.itemValue(a, hpath);\r\n\t\t\t\tconst v2 = this.itemValue(b, hpath);\r\n\r\n\t\t\t\tif (header.ascending) {\r\n\t\t\t\t\treturn v1 > v2 ? 1 : -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn v1 < v2 ? 1 : -1;\r\n\t\t\t});\r\n\t\t\tthis.initVisibleRows();\r\n\t\t}\r\n\t}\r\n\r\n\toffsetWidth() {\r\n\t\treturn this.table.element.nativeElement.offsetWidth;\r\n\t}\r\n\r\n\tngOnChanges(changes:any) {\r\n\t\t// if (changes.items) {\r\n\t\t// \tthis.evaluateRows();\r\n\t\t// }\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tif (this.pageInfo) {\r\n\t\t\tif (!this.pageInfo.to) {\r\n\t\t\t\tthis.pageInfo.to = this.pageInfo.pageSize;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.pageInfo = { \r\n                contentSize: 100000, \r\n                pageSize: 100000, \r\n                pages: 1, \r\n                from: 0, \r\n                to: 100000, \r\n                currentPage: 1, \r\n                maxWidth: \"0\" \r\n            };\r\n\t\t}\r\n\t\tif (!this.headers) {\r\n\t\t\tthis.headers = [];\r\n\t\t}\r\n\t\tthis.evaluateRows();\r\n        if (this.actionKeys) {\r\n            this.actionKeys = this.actionKeys.split(\",\");\r\n\t\t}\r\n\t\tif (!this.rowDetailer && this.expandable) {\r\n\t\t\tthis.rowDetailer = function(item) {\r\n\t\t\t\treturn {data: item, headers: []};\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (!this.expandable) {\r\n\t\t\tthis.expandable = function(item, showIcon) {return showIcon};\r\n\t\t}\r\n\t\tif (!this.rowDetailerHeaders) {\r\n\t\t\tthis.rowDetailerHeaders = (item) => [];\r\n\t\t}\r\n\t}\r\n\tevaluateRows() {\r\n\t\tif (this.enableFiltering) {\r\n\t\t\tthis.filterItems();\r\n\t\t} else {\r\n\t\t\tthis.filteredItems = this.items ? this.items : [];\r\n\t\t}\r\n\t\tthis.initVisibleRows();\r\n\t}\r\n\r\n    headerColumnElements() {\r\n\t\tlet result = [];\r\n\r\n\t\tif (this.table.element.nativeElement.children) {\r\n\t\t\tconst list = this.table.element.nativeElement.children;\r\n\t\t\tresult = this.caption ? list[1].children[0].children : list[0].children[0].children;\r\n\t\t}\r\n\t\treturn result;\r\n    }\r\n\r\n\theaderById(id) {\r\n\t\tlet h;\r\n\t\tfor (const i in this.headers) {\r\n\t\t\tif (this.headers[i].key === id) {\r\n\t\t\t\th = this.headers[i];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn h;\r\n\t}\r\n\r\n    columnsCount() {\r\n\t\tlet count = 0;\r\n\t\tthis.headers.map( (item) => {\r\n            if (item.present) {\r\n                count++;\r\n            }\r\n\t\t});\r\n        if (this.action) {\r\n            count++;\r\n        }\r\n        return count;\r\n\t}\r\n\thover(item, flag) {\r\n\t\tif (flag) {\r\n\t\t\titem.hover = true;\r\n\t\t} else {\r\n\t\t\tdelete item.hover;\r\n\t\t}\r\n\t}\r\n\r\n\ttoCssClass(header) {\r\n\t\treturn header.key.replace(/\\./g,'-');\r\n\t}\r\n    keydown(event, item) {\r\n        const code = event.which;\r\n        if ((code === 13) || (code === 32)) {\r\n\t\t\titem.click();\r\n\t\t}\r\n    }\r\n    offScreenMessage(item) {\r\n\t\tlet message: string = this.action;\r\n\t\tif (this.actionKeys) {\r\n\t\t\tthis.actionKeys.map((key) => { message = message.replace(key, item[key.substring(1, key.length - 1)]); })\r\n\t\t}\r\n        return message;\r\n    }\r\n\r\n    cellContent(item, header) {\r\n\t\tlet content = this.itemValue(item, header.key.split(\".\"));\r\n        return (content !== undefined && content != null && String(content).length) ? content : '&nbsp;';\r\n\t}\r\n\r\n\trowDetailerContext(item) {\r\n\t\treturn {\r\n\t\t\tdata: item,\r\n\t\t\ttableInfo: this.tableInfo,\r\n\t\t\theaders: this.rowDetailerHeaders(item)\r\n\t\t};\r\n\t}\r\n\r\n\tchangeFilter(event, header) {\r\n        const code = event.which;\r\n\r\n\t\theader.filter = event.target.value;\r\n\r\n\t\tif (this.filterwhiletyping || code === 13) {\r\n\t\t\tif(this.filteringTimerId) {\r\n\t\t\t\tclearTimeout(this.filteringTimerId);\r\n\t\t\t}\r\n\t\t\tthis.filteringTimerId = setTimeout(()=>{\r\n\t\t\t\tthis.filterItems();\r\n\t\t\t\tthis.initVisibleRows();\r\n\t\t\t\tthis.filteringTimerId  = undefined;\r\n\t\t\t}, 123);\r\n\t\t}\r\n\t}\r\n\tactionClick(event, item: any) {\r\n\t\tevent.stopPropagation();\r\n        if (this.rowDetailer && (this.expandIf || this.expandable(item, false)) ) {\r\n            if (item.expanded) {\r\n                delete item.expanded;\r\n            } else {\r\n                item.expanded = true;\r\n            }\r\n        } else {\r\n            this.onaction.emit(item);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tprint() {\r\n\t\tthis.printMode = true;\r\n\t\tsetTimeout(()=>{\r\n\t\t\tconst content = this.el.nativeElement.innerHTML;\r\n\t\t\tthis.printMode = false;\r\n\t\t\tconst popupWin = window.open('', '_blank', 'width=300,height=300');\r\n\t\t\r\n\t\t\tpopupWin.document.open();\r\n        \tpopupWin.document.write('<html><body onload=\"window.print()\">' + content + '</html>');\r\n        \tpopupWin.document.close();\r\n\t\t},3);\r\n\t}\r\n\r\n\t// <5, !5, >5, *E, E*, *E*\r\n\tprivate shouldSkipItem(value, filterBy) {\r\n\t\tlet result = false;\r\n\r\n\t\tif (value !== undefined && value !== null && String(value).length) {\r\n\t\t\tconst v = String(value);\r\n\t\t\tif (filterBy[0] === '<') {\r\n\t\t\t\tresult = filterBy.length > 1 && parseFloat(v) >= parseFloat(filterBy.substring(1));\r\n\t\t\t} else if (filterBy[0] === '>') {\r\n\t\t\t\tresult = filterBy.length > 1 && parseFloat(v) <= parseFloat(filterBy.substring(1));\r\n\t\t\t} else if (filterBy[0] === '!') {\r\n\t\t\t\tresult = filterBy.length > 1 && parseFloat(v) == parseFloat(filterBy.substring(1));\r\n\t\t\t} else if (filterBy[0] === '=') {\r\n\t\t\t\tresult = filterBy.length == 1 || parseFloat(v) !== parseFloat(filterBy.substring(1));\r\n\t\t\t} else if (filterBy[0] === '*' && filterBy[filterBy.length-1] !== '*') {\r\n\t\t\t\tconst f = filterBy.substring(1);\r\n\t\t\t\tresult = v.indexOf(f) !== v.length - f.length\r\n\t\t\t} else if (filterBy[0] !== '*' && filterBy[filterBy.length-1] === '*') {\r\n\t\t\t\tconst f = filterBy.substring(0, filterBy.length-1);\r\n\t\t\t\tresult = v.indexOf(f) !== 0;\r\n\t\t\t} else if (filterBy[0] === '*' && filterBy[filterBy.length-1] === '*') {\r\n\t\t\t\tresult = filterBy.length > 1 && v.indexOf( filterBy.substring(1, filterBy.length-1) ) < 0;\r\n\t\t\t} else {\r\n\t\t\t\tresult = v.indexOf(filterBy) < 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\tfilterItems() {\r\n\t\tthis.filteredItems = this.items ? this.items.filter((item) => {\r\n\t\t\tlet keepItem = true;\r\n\r\n\t\t\tfor (let i = 0; i < this.headers.length; i++) {\r\n\t\t\t\tconst header = this.headers[i];\r\n\t\t\t\tif (header.filter && header.filter.length) {\r\n\t\t\t\t\tconst v = this.itemValue(item, header.key.split(\".\"));\r\n\r\n\t\t\t\t\tif (this.shouldSkipItem(v,header.filter)) {\r\n\t\t\t\t\t\tkeepItem = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn keepItem;\r\n\t\t}) : [];\r\n\t\tthis.onfilter.emit(this.filteredItems);\r\n\t}\r\n\r\n\tonTableCellEdit(event) {\r\n\t\tconst id = event.id.split(\"-\");\r\n\t\tconst n = event.name;\r\n\t\tconst v= event.value;\r\n\t\tconst t = this.items[parseInt(id[1])];\r\n\r\n\t\tif (t) {\r\n\t\t\tconst list = id[0].split(\".\");\r\n\t\t\tlet subitem = t[list[0]];\r\n\t\t\tfor(let i = 1; i < (list.length - 1); i++) {\r\n\t\t\t\tsubitem = subitem[list[i]]\r\n\t\t\t}\r\n\t\t\tif (subitem && list.length > 1){\r\n\t\t\t\tsubitem[list[list.length - 1]] = v;\r\n\t\t\t}\r\n\t\t\tthis.onCellContentEdit.emit({name: n, value: v, item: t});\r\n\t\t}\r\n    }\r\n\r\n\tdragEnabled(event: DragEvent) {\r\n\t\treturn event.medium.dragable;\r\n\t}\r\n\tdropEnabled(event: DropEvent) {\r\n\t\treturn event.destination.medium.dragable;\r\n\t}\r\n\tonDragStart(event: DragEvent){\r\n//        this.dragging = true;\r\n\t}\r\n\tonDragEnd(event: DragEvent){\r\n //       this.dragging = false;\r\n\t}\r\n\tonDrop(event:DropEvent){\r\n\t\tthis.swapColumns(event.source, event.destination);\r\n\t}\r\n}\r\n","/*\n* Provides rendering of a table which is using the given FlexibleTableHeader set in\n* order to tabulate the given data. As per definition of earch header component,\n* a column could be hidden, sortable, or draggable. Each table row can expand/collapse\n* or respond to a click action.\n*/\nimport {\n    Component,\n\tInput,\n\tOutput,\n\tViewChild,\n\tViewContainerRef,\n\tOnInit,\n\tRenderer,\n\tElementRef,\n\tEventEmitter\n} from '@angular/core';\n\nimport { DropEvent, DragEvent } from '@sedeh/drag-enabled';\nimport { TableViewComponent } from './components/table.component';\nimport { TableHeadersGenerator } from './components/table-headers-generator';\n\n@Component({\n\tselector: 'lock-table',\n\ttemplateUrl: './lock.table.component.html',\n\tstyleUrls: ['./lock.table.component.scss']\n})\nexport class LockTableComponent implements OnInit {\n\n\tlockedHeaders:any;\n\tunlockedHeaders:any;\n\tfilteredItems = [];\n\n    @Input(\"vocabulary\")\n    public vocabulary = {\n\t\tconfigureTable: \"Configure Table\",\n\t\tconfigureColumns: \"Configure Columns\",\n\t\tclickSort: \"Click to Sort\",\n\t\tsetSize: \"Set Size\",\n\t\tfirstPage: \"First\",\n\t\tlastPage: \"Last\",\n\t\tpreviousPage: \"Previous\"\n\t};\n\n    @Input(\"persistenceId\")\n    public persistenceId: string;\n\n    @Input(\"persistenceKey\")\n    public persistenceKey: string;\n\n    @Input(\"caption\")\n    public caption: string;\n\n    @Input(\"action\")\n    public action: string;\n\n    @Input(\"actionKeys\")\n    public actionKeys;\n\n    @Input(\"tableClass\")\n    public tableClass = 'default-flexible-table';\n\n\t@Input(\"headers\")\n\tpublic headers: any[];\n\n\t@Input(\"items\")\n\tpublic items: any[];\n\n\t@Input(\"pageInfo\")\n\tpublic pageInfo: any;\n\n\t@Input(\"tableInfo\")\n\tpublic tableInfo: any;\n\n    @Input(\"configurable\")\n    public configurable: boolean;\n\n\t@Input(\"configAddon\")\n\tpublic configAddon: any;\n\n\t@Input(\"enableFiltering\")\n    public enableFiltering: boolean;\n\n    @Input(\"enableIndexing\")\n    public enableIndexing: boolean;\n\n    @Input(\"filterwhiletyping\")\n    public filterwhiletyping: boolean;\n\n\n\t@Output('onaction')\n\tprivate onaction = new EventEmitter();\n\n\t@Output('onCellContentEdit')\n\tprivate onCellContentEdit = new EventEmitter();\n\n\t@Output('onconfigurationchange')\n\tprivate onconfigurationchange = new EventEmitter();\n\n\t@ViewChild('lockedTable')\n\tprivate lockedTable: TableViewComponent;\n\n\t@ViewChild('unlockedTable')\n\tprivate unlockedTable: TableViewComponent;\n\n    scroll(event) {\n\t\tthis.renderer.setElementStyle(\n\t\t\t\tthis.lockedTable.el.nativeElement,\n\t\t\t\t\"left\",\n\t\t\t\tevent.target.scrollLeft+\"px\");\n\t}\n\n    constructor(\n\t\tprivate generator: TableHeadersGenerator,\n\t\tprivate renderer: Renderer\n\t) {}\n\n\tngOnInit() {\n\t\tif (this.pageInfo) {\n\t\t\tif (!this.pageInfo.to) {\n\t\t\t\tthis.pageInfo.to = this.pageInfo.pageSize;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.pageInfo = {\n                contentSize: 100000,\n                pageSize: 100000,\n                pages: 1,\n                from: 0,\n                to: 100000,\n                currentPage: 1,\n                maxWidth: \"0\"\n            };\n\t\t}\n\t\tif (this.persistenceKey) {\n\t\t\tconst headers:any = this.generator.retreiveHeaders(this.persistenceKey, this.persistenceId);\n\n\t\t\tif (headers) {\n\t\t\t\tthis.headers = headers;\n\t\t\t}\n\t\t}\n\t\tif (!this.headers) {\n\t\t\tthis.headers = this.generator.generateHeadersFor(this.items[0],\"\", 5, this.enableFiltering);\n\t\t\tif (this.persistenceKey) {\n\t\t\t\tthis.generator.persistHeaders(this.persistenceKey, this.persistenceId, this.headers);\n\t\t\t}\n\t\t}\n\t\tthis.filteredItems = this.items;\n\t\tthis.pageInfo.contentSize = this.items.length;\n\t\t\n\t\tthis.reconfigure(this.headers);\n\n\t}\n\n\tevaluatePositioning() {\n\t\tthis.renderer.setElementStyle(\n\t\t\tthis.unlockedTable.el.nativeElement,\n\t\t\t\"margin-left\",\n\t\t\tthis.lockedTable.offsetWidth()+\"px\");\n\t}\n\n\treconfigure(event) {\n\t\tthis.headers = event;\n\t\tthis.lockedHeaders = this.headers.filter( (item) => item.locked === true && item.present);\n\t\tthis.unlockedHeaders = this.headers.filter( (item) => item.locked !== true  && item.present);\t\n\t\tthis.onconfigurationchange.emit(event);\n\n\t\tif (this.persistenceKey) {\n\t\t\tthis.generator.persistHeaders(this.persistenceKey, this.persistenceId, this.headers);\n\t\t}\n\t\tsetTimeout(this.evaluatePositioning.bind(this),111);\n\t}\n\n\tonlock(event) {\n\t\tthis.lockedHeaders = this.headers.filter( (item) => item.locked === true && item.present);\n\t\tthis.unlockedHeaders = this.headers.filter( (item) => item.locked !== true  && item.present);\t\n\t\tthis.onconfigurationchange.emit(event);\n\n\t\tif (this.persistenceKey) {\n\t\t\tthis.generator.persistHeaders(this.persistenceKey, this.persistenceId, this.headers);\n\t\t}\n\t\tsetTimeout(this.evaluatePositioning.bind(this),111);\n\t}\n\tchangeLockedTableFilteredItems(event) {\n\t\tif (this.lockedTable) {\n\t\t\tthis.lockedTable.filteredItems = event;\n\t\t\tthis.lockedTable.initVisibleRows();\n\t\t}\n\t}\n\tchangeUnlockedTableFilteredItems(event) {\n\t\tif (this.unlockedTable) {\n\t\t\tthis.unlockedTable.filteredItems = event;\n\t\t\tthis.unlockedTable.initVisibleRows();\n\t\t}\n\t}\n\tonPaginationChange(event) {\n\t\tthis.pageInfo = event;\n\t\tthis.unlockedTable.evaluateRows();\n\t}\n\n\ttableAction(event) {\n\t\tthis.onaction.emit(event)\n\t}\n\n\tonDrop(event:DropEvent){\n\n\t}\n\tonCellEdit(event){\n\t\tthis.onCellContentEdit.emit(event);\n\t}\n}\n\n","/*\r\n* Provides rendering of flexible table in a lazy load fashion.\r\n*/\r\nimport { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {IntoPipeModule} from '@sedeh/into-pipes';\r\nimport { DragDropModule } from '@sedeh/drag-enabled';\r\n\r\nimport { PaginationComponent } from './components/pagination.component';\r\nimport { ConfigurationComponent } from './components/configuration.component';\r\nimport { TableViewComponent } from './components/table.component';\r\n\r\nimport { TableHeadersGenerator } from './components/table-headers-generator';\r\nimport { FlexibleTableComponent } from './flexible.table.component';\r\nimport { LockTableComponent } from './lock.table.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        DragDropModule,\r\n        IntoPipeModule\r\n    ],\r\n    declarations: [\r\n        FlexibleTableComponent,\r\n        LockTableComponent,\r\n        ConfigurationComponent,\r\n        PaginationComponent,\r\n        TableViewComponent\r\n    ],\r\n    exports: [\r\n        FlexibleTableComponent,\r\n        LockTableComponent\r\n    ],\r\n    entryComponents: [\r\n    ],\r\n    providers: [\r\n        TableHeadersGenerator\r\n    ],\r\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\r\n})\r\n\r\nexport class FlexibleTableModule {}\r\n"]}